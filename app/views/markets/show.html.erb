<section class="body">

  <article class="entity-display">
    <img src="../assets/Market-logo-white.png" alt="vendor placeholder logo" class="market"/>
    <ul class="address-block">
      <h3><%= @market.name %></li></h3>
      <li><%= @market.address %></li>
      <li><%= "#{@market.city}, #{@market.state} #{@market.zip}" %></li>
    </ul>
    <%= button_to "Edit Profile", {controller: 'markets', action: 'edit', id: @market.id }, method: :get %>
    <%= button_to "Delete Profile", {controller: 'markets', action: 'destroy', id: @market.id }, method: :delete, data: {confirm: "Are you sure you want to delete this?"} %>
    <div class="list-break"></div>
  </article>


  <article>
    <%# button_to "Add Vendor", {controller: 'vendors', action: 'new'}, method: :get %>
    <table>
      <tr>
        <th>Vendors</th>
        <th>Description</th>
        <th>No. of Employees</th>
        <th></th>
        <th></th>
      </tr>
      <% @market.vendors.each do |vendor| %>
        <tr>
          <td>
            <%= link_to vendor.name, {controller: 'vendors', action: 'show', id: vendor.id}, method: :get %>
          </td>
          <td>
            <%= vendor.description %>
          </td>
          <td>
            <%= vendor.num_of_employees %>
          </td>
          <td>
            <%= button_to "Edit", {controller: 'vendors', action: 'edit', id: vendor.id}, method: :get %>
          </td>
          <td>
            <%= button_to "Delete", {controller: 'vendors', action: 'destroy', id: vendor.id}, method: :delete, data: {confirm: "Are you sure you want to delete this?"}, class:"submit" %>
          </td>
        </tr>
      <% end %>

      <%= form_for @vendor, url: {controller: 'vendors', action: 'create'}, method: :post do |f| %>
        <tr>
          <td>
            <%= f.text_field :name, placeholder: "New vendor name"%>
          </td>
          <td>
            <%= f.text_area :description, placeholder: "Description" %>
          </td>
          <td>
            <%= f.number_field :num_of_employees, placeholder: "No. of employees" %>
          </td>
          <td>
            <%= f.number_field :market_id, value: @market.id %>
          </td>
          <td>
            <%= f.submit %>
          </td>
        </tr>
      <% end %>

    </table>

</section>

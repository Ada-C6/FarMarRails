
<section class="body">

  <section class="top-of-page-form vendor">
    <%= form_for @sale, url: {controller: 'sales', action: 'create'}, method: :post do |f| %>
        <%= f.number_field :amount, placeholder: "Amount" %>

          <!-- <%= f.label :product_id %> -->
          <%= f.collection_select :product_id, @vendor.products, :id, :name %>

          <%= f.hidden_field :vendor_id, value: @vendor.id%>

          <%= f.hidden_field :purchase_time, value: DateTime.now %>
  

      <%= f.submit class:"search-button"%>

    <% end %>
  </section>



  <article>
    <ul>
      <% if !@vendor.sales.nil? %>

        <% @vendor.sales.each do |sale| %>
          <div class="entity-text">
            <h3>Transaction ID: <%= sale.id %></h3>
            <h4><%= sale.amount %></h4>
            <li><%= sale.purchase_time %></li>
            <li><%= sale.product_id %></li>
            <li><%= sale.product.name %></li>
            <div class="entity-buttons">
              <%= button_to "Delete", {controller: 'sales', action: 'destroy', id: sale.id}, method: :delete, data: {confirm: "Are you sure you want to delete this?"}, class:"submit" %>
            </div>
          </div>
          <div class="list-break"></div>

        <% end %>

      <% else %>
        <p class="error-message">
          No sales transactions yet. Enter your first sale!
        </p>
      <% end %>
    </ul>
    <p>
      Total Sales Amount: <%= @total %>
    </p>
  </article>

</section>
